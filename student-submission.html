<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Submissions â€“ HAFEDPOLY</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
*{box-sizing:border-box;font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial;}
body{margin:0;background:#f0f2f5;color:#333;}
header{display:flex;justify-content:space-between;align-items:center;padding:16px;background:#fff;box-shadow:0 2px 6px rgba(0,0,0,.1);}
header h1{margin:0;color:#007bff;}
  .hamburger{width:28px;height:20px;display:flex;flex-direction:column;justify-content:space-between;cursor:pointer;}
    .hamburger span{display:block;height:3px;background:#007bff;border-radius:2px;transition:.3s;}
    .hamburger.active span:nth-child(1){transform:translateY(8.5px) rotate(45deg);}
    .hamburger.active span:nth-child(2){opacity:0;}
    .hamburger.active span:nth-child(3){transform:translateY(-8.5px) rotate(-45deg);}
nav{position:fixed;top:0;right:-250px;width:220px;height:100%;background:#fff;box-shadow:-2px 0 10px rgba(0,0,0,.15);padding:20px;transition:.3s;}
nav.active{right:0;}
nav a{display:block;margin:14px 0;color:#007bff;text-decoration:none;font-weight:600;}
.container{padding:20px;max-width:1000px;margin:20px auto;}
table{width:100%;border-collapse:collapse;background:#fff;box-shadow:0 4px 12px rgba(0,0,0,.1);}
th,td{padding:12px;text-align:left;border-bottom:1px solid #ddd;}
th{background:#007bff;color:#fff;}
.status{font-weight:600;}
.status.Pending{color:#dc3545;}
.status.Resolved{color:#28a745;}
</style>
</head>
<body>

<header>
  <h1>My Submissions</h1>
  <div class="hamburger" id="hamburger"><span></span><span></span><span></span></div>
</header>

<nav id="nav">
  <a href="student-dashboard.html">Dashboard</a>
  <a href="submit-complaint.html">Submit Complaint</a>
  <a href="submit-suggestion.html">Submit Suggestion</a>
  <a href="student-submission.html">My Submissions</a>
  <a href="#" id="logoutLink">Logout</a>
</nav>

<div class="container">
  <h2>Complaints</h2>
  <table>
    <thead>
      <tr>
        <th>ID</th><th>Category</th><th>Title</th><th>Description</th><th>Status</th><th>Date</th>
      </tr>
    </thead>
    <tbody id="complaintsBody"></tbody>
  </table>

  <h2 style="margin-top:30px;">Suggestions</h2>
  <table>
    <thead>
      <tr>
        <th>ID</th><th>Category</th><th>Title</th><th>Description</th><th>Status</th><th>Date</th>
      </tr>
    </thead>
    <tbody id="suggestionsBody"></tbody>
  </table>
</div>

<script>
const $=id=>document.getElementById(id);
const hamburger=$("hamburger"), nav=$("nav");
hamburger.onclick=()=>{hamburger.classList.toggle("active");nav.classList.toggle("active");};
$("logoutLink").onclick=(e)=>{e.preventDefault();localStorage.removeItem("activeStudent");location.href="login.html";};

const active=JSON.parse(localStorage.getItem("activeStudent")||"null");
if(!active){alert("Session expired. Please log in.");location.href="login.html";}

function loadSubmissions(){
  const complaints=JSON.parse(localStorage.getItem("complaints")||"[]").filter(c=>c.studentId===active.uniqueId || c.studentId===active.id);
  const suggestions=JSON.parse(localStorage.getItem("suggestions")||"[]").filter(s=>s.studentId===active.uniqueId || s.studentId===active.id);

  const compBody=$("complaintsBody"); compBody.innerHTML="";
  if(complaints.length===0){ compBody.innerHTML="<tr><td colspan='6'>No complaints submitted.</td></tr>"; }
  else{
    complaints.forEach(c=>{
      const tr=document.createElement("tr");
      tr.innerHTML=`<td>${c.complaintId}</td>
        <td>${c.category}</td>
        <td>${c.title}</td>
        <td>${c.desc}</td>
        <td class="status ${c.status}">${c.status}</td>
        <td>${c.date}</td>`;
      compBody.appendChild(tr);
    });
  }

  const sugBody=$("suggestionsBody"); sugBody.innerHTML="";
  if(suggestions.length===0){ sugBody.innerHTML="<tr><td colspan='6'>No suggestions submitted.</td></tr>"; }
  else{
    suggestions.forEach(s=>{
      const tr=document.createElement("tr");
      tr.innerHTML=`<td>${s.suggestionId}</td>
        <td>${s.category}</td>
        <td>${s.title}</td>
        <td>${s.desc}</td>
        <td class="status ${s.status}">${s.status}</td>
        <td>${s.date}</td>`;
      sugBody.appendChild(tr);
    });
  }
}

loadSubmissions();
</script>

</body>
  </html>
